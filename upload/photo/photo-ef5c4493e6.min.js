function PhotoDisplayManager(){"function"!=typeof this.initialManagerData&&(PhotoDisplayManager.prototype.initialManagerData=function(){this.manager={outsideChain:"http://obbc714o1.bkt.clouddn.com/site/",photos:[],photosCount:0,status:{hiddenHead:[],displayNormal:[],hiddenTail:[]},activatingIndex:0,thumbAvailableWidth:0}}),"function"!=typeof this.installJsonp&&(PhotoDisplayManager.prototype.installJsonp=function(t){var a=$("<script></script>");a.attr("type","text/javascript"),a.attr("src",t),a.attr("id","jsonp"),$("body").append(a),a=null}),"function"!=typeof this.parseJsonpData&&(PhotoDisplayManager.prototype.parseJsonpData=function(t){var a=JSON.parse(JSON.stringify(photosJsonp));switch(t){case"rewrite":this.initialManagerData();for(var n=0,e=a.length;n<e;n++){var i={index:n,name:a[n].name,path:a[n].path};this.manager.photos.push(i),this.manager.photosCount++,i=null}break;case"add":}a=null}),"function"!=typeof this.uninstallJsonp&&(PhotoDisplayManager.prototype.uninstallJsonp=function(){$("#jsonp").remove()}),"function"!=typeof this.updateThumbAvailableWidth&&(PhotoDisplayManager.prototype.updateThumbAvailableWidth=function(t){var a=this.manager.status.displayNormal.length,n=parseFloat(t.parent().css("width")),e=0==a?0:this.getComputedVhVw(18,"vh")*a;this.manager.thumbAvailableWidth=n-e,a=n=e=null}),"function"!=typeof this.getComputedVhVw&&(PhotoDisplayManager.prototype.getComputedVhVw=function(t,a){var n=$("<div></div>"),e=t+a;return n.attr("class","tempElement"),n.css("width",e),n.css("display","none"),$("body").append(n),e=$("body").children(".tempElement").css("width"),n=null,$("body").children(".tempElement").remove(),parseFloat(e)}),"function"!=typeof this.isThumbInsertable&&(PhotoDisplayManager.prototype.isThumbInsertable=function(t){var a,n;return a="number"==typeof t?t:this.getComputedVhVw(18,"vh"),n=this.manager.thumbAvailableWidth-a<0?-1:1,a=null,n}),"function"!=typeof this.insertThumb&&(PhotoDisplayManager.prototype.insertThumb=function(t,a){var n=this.manager.photos[a],e="url('"+this.manager.outsideChain+n.path+n.name+"_low.jpg')",i=$("<div></div>");i.attr({class:"one","aria-label":n.name,"data-index":a}),i.css("background-image",e),t.append(i),n=e=i=null}),"function"!=typeof this.updateStatus&&(PhotoDisplayManager.prototype.updateStatus=function(t,a){var n,e=this.manager.status.displayNormal,i=this.manager.status.hiddenHead,s=this.manager.status.hiddenTail,o=e[0];switch(n="number"==typeof e[e.length-1]?e[e.length-1]:-1,t){case"seeMoreRight":switch(a){case"show":s.shift(),e.push(n+1);break;case"hide":e.shift(o),i.push(o)}break;case"seeMoreLeft":switch(a){case"show":i.pop(),e.unshift(o-1);break;case"hide":e.pop(),s.unshift(n)}}a=e=i=s=n=o=null}),"function"!=typeof this.hideOneThumb&&(PhotoDisplayManager.prototype.hideOneThumb=function(t,a){var n,e=this.manager.status.displayNormal;switch(a){case"seeMoreRight":n=t.children().eq(e[0]),this.updateStatus(a,"hide"),this.updateThumbAvailableWidth(t);break;case"seeMoreLeft":n=t.children().eq(e[e.length-1]),this.updateStatus(a,"hide"),this.updateThumbAvailableWidth(t)}n.css("display","none"),n=null}),"function"!=typeof this.showEnoughThumb&&(PhotoDisplayManager.prototype.showEnoughThumb=function(t,a){var n,e,i=this.manager.status.displayNormal;switch(a){case"seeMoreRight":var s;for(s="number"==typeof i[i.length-1]?i[i.length-1]:-1,e=s+1;this.isThumbInsertable()>0;)0==this.manager.status.hiddenTail.length?this.insertThumb(t,e):(n=t.children().eq(e),n.css("display","block")),this.updateStatus(a,"show"),this.updateThumbAvailableWidth(t),e++;s=null;break;case"seeMoreLeft":var o=i[0];e=o-1,n=t.children().eq(e),n.css("display","block"),this.updateStatus(a,"show")}i=n=e=null}),"function"!=typeof this.changeActivatingIndex&&(PhotoDisplayManager.prototype.changeActivatingIndex=function(t,a){t.children().eq(this.manager.activatingIndex).attr("class","one"),this.manager.activatingIndex=parseInt(a),t.children().eq(this.manager.activatingIndex).attr("class","one activating")}),"function"!=typeof this.displayFullShow&&(PhotoDisplayManager.prototype.displayFullShow=function(t,a){var n=this.manager.photos[a],e=this.manager.outsideChain+n.path+n.name+"_low.jpg";t.children("img").attr({src:e,alt:n.name})}),"function"!=typeof this.addThumbPhotoAction&&(PhotoDisplayManager.prototype.addThumbPhotoAction=function(t,a,n,e,i,s){var o=this;t.on("click",".one",function(){var h=$(this).attr("data-index");o.changeActivatingIndex(t,h),o.displayFullShow(a,h),h=null,o.checkArrowStatus(t,a,n,e,i,s)})}),"function"!=typeof this.addFullPhotoAction&&(PhotoDisplayManager.prototype.addFullPhotoAction=function(t,a){t.on("click","img",function(){var t=$(this).attr("src").split("_")[0]+".jpg";a.css("display","flex"),a.children("img").attr("src",t)}),a.on("click",".mask",function(){a.children("img").attr("src",""),a.css("display","none")}),a.on("click",".leave",function(){a.children("img").attr("src",""),a.css("display","none")})}),"function"!=typeof this.addArrowAction&&(PhotoDisplayManager.prototype.addArrowAction=function(t,a,n,e,i,s){var o=this;n.on("click",function(){0!=o.manager.status.hiddenHead.length&&(o.hideOneThumb(t,"seeMoreLeft"),o.showEnoughThumb(t,"seeMoreLeft"),o.checkArrowStatus(t,a,n,e,i,s))}),e.on("click",function(){o.manager.status.displayNormal[o.manager.status.displayNormal.length-1]!=o.manager.photosCount-1&&(o.hideOneThumb(t,"seeMoreRight"),o.showEnoughThumb(t,"seeMoreRight"),o.checkArrowStatus(t,a,n,e,i,s))}),i.on("click",function(){if(0!=o.manager.activatingIndex){var h,l=o.manager.activatingIndex-1,r=o.manager.status.displayNormal,c=0,p=r[0]-l;if(p>0)c=p,h="seeMoreLeft";else{var d=r[r.length-1]-l;d<0&&(c=-d,h="seeMoreRight"),d=null}for(;0!=c;)o.hideOneThumb(t,h),o.showEnoughThumb(t,h),--c;o.changeActivatingIndex(t,l),o.displayFullShow(a,o.manager.activatingIndex),l=r=flag=c=h=null,o.checkArrowStatus(t,a,n,e,i,s)}}),s.on("click",function(){if(o.manager.activatingIndex!=o.manager.photosCount-1){var h,l=o.manager.activatingIndex+1,r=o.manager.status.displayNormal,c=0,p=r[0]-l;if(p>0)c=p,h="seeMoreLeft";else{var d=r[r.length-1]-l;d<0&&(c=-d,h="seeMoreRight"),d=null}for(;0!=c;)o.hideOneThumb(t,h),o.showEnoughThumb(t,h),--c;o.changeActivatingIndex(t,l),o.displayFullShow(a,o.manager.activatingIndex),l=r=flag=c=h=null,o.checkArrowStatus(t,a,n,e,i,s)}})}),"function"!=typeof this.checkArrowStatus&&(PhotoDisplayManager.prototype.checkArrowStatus=function(t,a,n,e,i,s){0==this.manager.status.hiddenHead.length?(n.children(".normal").css("display","none"),n.children(".stop").css("display","inline")):(n.children(".normal").css("display","inline"),n.children(".stop").css("display","none")),this.manager.status.displayNormal[this.manager.status.displayNormal.length-1]==this.manager.photosCount-1?(e.children(".normal").css("display","none"),e.children(".stop").css("display","inline")):(e.children(".normal").css("display","inline"),e.children(".stop").css("display","none")),0==this.manager.activatingIndex?(i.children(".normal").css("display","none"),i.children(".stop").css("display","inline")):(i.children(".normal").css("display","inline"),i.children(".stop").css("display","none")),this.manager.activatingIndex==this.manager.photosCount-1?(s.children(".normal").css("display","none"),s.children(".stop").css("display","inline")):(s.children(".normal").css("display","inline"),s.children(".stop").css("display","none"))})}$(document).ready(function(){var t=$(".thumb").find(".show"),a=$(".full").find(".show"),n=$(".forDisplayOriginalPhoto"),e=$(".thumb").find(".arrow-left"),i=$(".thumb").find(".arrow-right"),s=$(".full").find(".arrow-left"),o=$(".full").find(".arrow-right"),h=new PhotoDisplayManager;h.installJsonp("photosData.json"),h.parseJsonpData("rewrite"),h.uninstallJsonp(),h.updateThumbAvailableWidth(t),h.showEnoughThumb(t,"seeMoreRight"),h.changeActivatingIndex(t,0),h.displayFullShow(a,0),h.addThumbPhotoAction(t,a,e,i,s,o),h.addFullPhotoAction(a,n),h.addArrowAction(t,a,e,i,s,o)});