function RandomCorlorBox(){this.manager={doc:{width:0,height:0},box:{width:30,height:30,margin:5},boxs:{count:0,row:0,col:0},container:{width:0,height:0},emphalize:{A:{scale:1.5,opacity:1},B:{scale:1.3,opacity:.9},C:{scale:1.1,opacity:.8}},userData:{kind:sessionStorage.getItem("mode")||"less",mode:sessionStorage.getItem("mode")||"color",opacity:sessionStorage.getItem("opacity")||.1}},"function"!=typeof this.updateDocData&&(RandomCorlorBox.prototype.updateDocData=function(){this.manager.doc.width=$(document).width(),this.manager.doc.height=$(document).height()}),"function"!=typeof this.updateBoxsData&&(RandomCorlorBox.prototype.updateBoxsData=function(){var t=this.manager.doc,o=this.manager.box,e=this.manager.boxs;e.row=Math.floor((t.height-o.margin)/(o.height+2*o.margin)),e.col=Math.floor((t.width-o.margin)/(o.width+2*o.margin)),e.count=e.row*e.col,t=o=e=null}),"function"!=typeof this.updateContainerData&&(RandomCorlorBox.prototype.updateContainerData=function(){var t=this.manager.box,o=this.manager.boxs,e=this.manager.container;e.width=o.col*(t.width+2*t.margin),e.height=o.row*(t.height+2*t.margin),t=o=e=null}),"function"!=typeof this.getRandomColor&&(RandomCorlorBox.prototype.getRandomColor=function(t,o){var e="";switch(t){case"more":var a=6,n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];do{var i=Math.floor(15*Math.random());switch(o){case"gray":e+=n[i],5==a&&(e=e+e+e,a=1);break;case"color":e+=n[i],1==a&&e[0]==e[2]==e[4]&&e[1]==e[3]==e[5]&&(e="",a=6)}}while(--a>0);e="#"+e,n=null;break;case"less":switch(o){case"gray":e="hsl(0, 100%,"+Math.floor(2*Math.random())+"00%)";break;case"color":e="hsl("+Math.floor(360*Math.random())+",80%,50%)"}}return e}),"function"!=typeof this.createBox&&(RandomCorlorBox.prototype.createBox=function(t,o){var e=this.manager.box,a=$("<div></div>");return a.css({width:e.width,height:e.height,margin:e.margin,float:"left","background-color":this.getRandomColor(t,o)}),e=null,a}),"function"!=typeof this.createBoxs&&(RandomCorlorBox.prototype.createBoxs=function(t){for(var o=this.manager.boxs.row,e=this.manager.boxs.col,a=this.manager.userData.kind,n=this.manager.userData.mode,i=0;i<o;i++)for(var r=0;r<e;r++){var s=this.createBox(a,n);s.attr("data-row",i),s.attr("data-col",r),t.append(s),s=null}}),"function"!=typeof this.centerContainer&&(RandomCorlorBox.prototype.centerContainer=function(t){t.css("width",this.manager.container.width+"px"),t.css("height",this.manager.container.height+"px")}),"function"!=typeof this.clearCenterContainer&&(RandomCorlorBox.prototype.clearCenterContainer=function(t){t.css("width",""),t.css("height","")}),"function"!=typeof this.calElementIndex&&(RandomCorlorBox.prototype.calElementIndex=function(t,o,e){return o*t+e}),"function"!=typeof this.getAroundArea&&(RandomCorlorBox.prototype.getAroundArea=function(t){var o={A:[],B:[],C:[]},e=this.manager.boxs.row,a=this.manager.boxs.col,n=parseInt(t.attr("data-row")),i=parseInt(t.attr("data-col")),r=leftBottom=rightTop=rightBottom=1;return o.A.push(this.calElementIndex(a,n,i)),n-2>-1&&o.C.push(this.calElementIndex(a,n-2,i)),n-1>-1?o.B.push(this.calElementIndex(a,n-1,i)):(r=r&&0,rightTop=rightTop&&0),n+1<e?o.B.push(this.calElementIndex(a,n+1,i)):(leftBottom=leftBottom&&0,rightBottom=rightBottom&&0),n+2<e&&o.C.push(this.calElementIndex(a,n+2,i)),i-2>-1&&o.C.push(this.calElementIndex(a,n,i-2)),i-1>-1?o.B.push(this.calElementIndex(a,n,i-1)):(r=r&&0,leftBottom=leftBottom&&0),i+1<a?o.B.push(this.calElementIndex(a,n,i+1)):(rightTop=rightTop&&0,rightBottom=rightBottom&&0),i+2<a&&o.C.push(this.calElementIndex(a,n,i+2)),1==r&&o.B.push(this.calElementIndex(a,n-1,i-1)),1==rightTop&&o.B.push(this.calElementIndex(a,n-1,i+1)),1==leftBottom&&o.B.push(this.calElementIndex(a,n+1,i-1)),1==rightBottom&&o.B.push(this.calElementIndex(a,n+1,i+1)),e=a=n=i=r=leftBottom=rightTop=rightBottom=null,o}),"function"!=typeof this.emphalizeArea&&(RandomCorlorBox.prototype.emphalizeArea=function(t,o){for(var e in o)for(var a in o[e]){var n=o[e][a],i="scale("+this.manager.emphalize[e].scale+")",r=this.manager.emphalize[e].opacity;t.children().eq(n).css({transform:i,opacity:r}),n=i=r=null}}),"function"!=typeof this.clearEmphalizeArea&&(RandomCorlorBox.prototype.clearEmphalizeArea=function(t){var o=this;t.children("div").each(function(){$(this).css({transform:"scale(1,1)",opacity:o.manager.userData.opacity})})}),"function"!=typeof this.addBoxsAction&&(RandomCorlorBox.prototype.addBoxsAction=function(t){var o=this;t.on("mouseover","div",function(){var e=o.getAroundArea($(this));o.emphalizeArea(t,e)}),t.on("mouseout","div",function(){o.clearEmphalizeArea(t)})}),"function"!=typeof this.getUserData&&(RandomCorlorBox.prototype.getUserData=function(t){if(sessionStorage.getItem("kind")){this.manager.userData.kind=sessionStorage.getItem("kind"),this.manager.userData.mode=sessionStorage.getItem("mode");var o=parseFloat(sessionStorage.getItem("opacity"));this.manager.userData.opacity=o>=0&&o<=1?o:o<0?0:1}}),"function"!=typeof this.setUserData&&(RandomCorlorBox.prototype.setUserData=function(t,o){sessionStorage.setItem("kind",t.find("#kind").val()),sessionStorage.setItem("mode",t.find("#mode").val()),sessionStorage.setItem("opacity",t.find("#opacity").val())}),"function"!=typeof this.addSettingAction&&(RandomCorlorBox.prototype.addSettingAction=function(t,o){var e=this;t.on("click",function(){o.css("display","block")}),o.find("#submit").on("click",function(){e.setUserData(o),o.css("display","none"),location.reload()})}),"function"!=typeof this.updateOpacity&&(RandomCorlorBox.prototype.updateOpacity=function(t){var o=this;t.children("div").each(function(){console.log,$(this).css("opacity",o.manager.userData.opacity)})})}$(document).ready(function(){var t=$(".container"),o=new RandomCorlorBox,e=$(".setting"),a=$(".settingIco");o.getUserData(t),o.updateDocData(),o.updateBoxsData(),o.updateContainerData(),o.createBoxs(t),o.centerContainer(t),o.updateOpacity(t),o.addBoxsAction(t),o.addSettingAction(a,e)});